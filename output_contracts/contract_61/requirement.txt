This smart contract is a [Compound Staking Reward contract]. The main functions include [depositing tokens, withdrawing tokens, calculating share values, and managing penalties for early withdrawals]. The main states of the contract include [Active, Depositing, and Withdrawing]. The process logic for the transition of states is as follows: [Users can deposit tokens to earn shares, which represent their stake. When withdrawing, users can either withdraw a specific amount of shares or all shares, incurring penalties based on the withdrawal timing. The contract also auto-compounds rewards periodically]. The main variables include [userInfo, totalShares, penaltyPeriods, and penaltyRates]. The main functions include [depositFor, deposit, withdraw, and calculateSharesValueInState]. The main events include [Deposit and Withdraw].